set(CMAKE_C_FLAGS "-Wno-shift-negative-value")
if(UNIX OR APPLE)
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fPIC -Wall")
endif()

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR} include )
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/../zlib")
INCLUDE_DIRECTORIES("${CMAKE_CURRENT_BINARY_DIR}/../zlib")

SET(png_HEADER_FILES
  png.h
  pngconf.h
)

SET(png_SOURCE_FILES
  png.c
  pngerror.c
  pngget.c
  pngmem.c
  pngpread.c
  pngread.c
  pngrio.c
  pngrtran.c
  pngrutil.c
  pngset.c
  pngtrans.c
  pngwio.c
  pngwrite.c
  pngwtran.c
  pngwutil.c
)

add_library (png STATIC
	${png_HEADER_FILES}
	${png_SOURCE_FILES}
)

SET(png_DEPENDENCIES zlib)

SET(png_LINK_LIBRARIES zlib)

SOURCE_GROUP("src" FILES ${png_SOURCE_FILES})
SOURCE_GROUP("include" FILES ${png_HEADER_FILES})

target_link_libraries(png zlib)

SET_TARGET_PROPERTIES(png
    PROPERTIES PUBLIC_HEADER "${headers}")

    SET_TARGET_PROPERTIES(png PROPERTIES
    ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${CMAKE_CURRENT_BINARY_DIR}
    ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${CMAKE_CURRENT_BINARY_DIR})
    SET_TARGET_PROPERTIES(png PROPERTIES 
    LIBRARY_OUTPUT_DIRECTORY_DEBUG ${CMAKE_CURRENT_BINARY_DIR}
    LIBRARY_OUTPUT_DIRECTORY_RELEASE ${CMAKE_CURRENT_BINARY_DIR})
    SET_TARGET_PROPERTIES(png PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY_DEBUG ${CMAKE_CURRENT_BINARY_DIR}
    RUNTIME_OUTPUT_DIRECTORY_RELEASE ${CMAKE_CURRENT_BINARY_DIR})

IF(FLYWAVE_ENABLE_SOLUTION_FOLDERS)
  SET_TARGET_PROPERTIES(png PROPERTIES FOLDER external)
ENDIF(FLYWAVE_ENABLE_SOLUTION_FOLDERS)
